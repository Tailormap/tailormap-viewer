<form [formGroup]="filterForm">

  <div class="layers-and-attributes">
    <tm-admin-filterable-layers-list
      [layersForExistingFilter]="appLayerIds$ | async"
      (selectLayer)="setSelectedLayer($event)"></tm-admin-filterable-layers-list>

    <tm-admin-form-attribute-list [featureType]="featureType$ | async"
                                  [loadingFeatureType]="loadingFeatureType$ | async"
                                  [usingInApplicationFilter]="true"
                                  (selectAttribute)="setSelectedAttribute($event)"></tm-admin-form-attribute-list>
  </div>

  @if (selectedAttribute()){
    <div class="attribute-filter-info">
      <strong>Filter for attribute '{{ selectedAttribute()?.name }}' on layer '{{ selectedLayer()?.layerSettings?.title || selectedLayer()?.title }}'</strong>
    </div>

    <div class="attribute-filter-values">
      <tm-attribute-filter
        [attributeType]="selectedAttribute()!.type"
        [filter]="_filterData"
        (filterChanged)="setFilterValues($event)"></tm-attribute-filter>
    </div>
  }


</form>


