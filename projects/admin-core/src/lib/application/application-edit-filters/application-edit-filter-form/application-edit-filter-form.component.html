<form [formGroup]="filterForm">

  <div class="layers-and-attributes">
    <tm-admin-filterable-layers-list
      [filterableLayers]="filterableLayers"
      (selectLayer)="setSelectedLayer($event)"></tm-admin-filterable-layers-list>

    <tm-admin-form-attribute-list [featureType]="featureType$ | async"
                                  [loadingFeatureType]="loadingFeatureType$ | async"
                                  [usingInApplicationFilter]="true"
                                  (selectAttribute)="setSelectedAttribute($event)"></tm-admin-form-attribute-list>
  </div>

  @if (filterForm.get('attribute')?.value && filterForm.get('attributeType')?.value){
    <div class="attribute-filter-info">
      <strong>Filter for attribute '{{ filterForm.get('attribute')!.value }}' on layer '
        {{ filterForm.get('layer')?.value?.geoServiceLayer?.layerSettings?.title
        || filterForm.get('layer')?.value?.geoServiceLayer?.title }}'</strong>
    </div>

    <div class="attribute-filter-values">
      <tm-attribute-filter
        [attributeType]="filterForm.get('attributeType')!.value!"
        [filter]="_filterData"
        (filterChanged)="setFilterValues($event)"></tm-attribute-filter>
    </div>
  }


</form>


