<div class="application-create-filter">
  <div class="create-filter-header">
    <strong i18n="@@admin-core.application.filters.create-new-filter">Create new filter</strong>
  </div>
  <div class="create-filter-content">
    <div class="create-filter-layer-info" >
      <span i18n="@@admin-core.application.filters.create-filter-layer-info">
        Select the layers you want to filter by. You can select one or multiple layers.
      </span>
    </div>
    <tm-admin-list-filter [formControl]="layerFilter"
                          [filterTerm]="layerFilterSignal()"
                          i18n-label="@@admin-core.application.filters.filter-layers"
                          label="Filter layers"></tm-admin-list-filter>
    <mat-selection-list (selectionChange)="onLayerSelectionChange($event)">
      @for (layer of layerList(); track layer.appLayerId) {
        <mat-list-option [value]="layer.appLayerId" [selected]="layer.selected">
          <div class="layer-label">{{ layer.geoServiceLayer.layerSettings?.title || layer.geoServiceLayer.title }}</div>
        </mat-list-option>
      }
    </mat-selection-list>
    <div class="page-details-actions">
      <tm-admin-save-button label="Create" i18n-label="@@admin-core.common.create" [disabled]="!saveEnabled()" (save)="save()"></tm-admin-save-button>
      <button mat-flat-button [routerLink]="'/admin/applications/application/' + applicationId() + '/filters'" i18n="@@admin-core.common.cancel">Cancel</button>
    </div>
  </div>
</div>
