@if (active$ | async) {
  <div class="drawing-form">
    <p class="label" i18n="@@core.drawing.draw-shape">Draw shape</p>
    <div class="icon-button-list">
      <button [class.button--active]="activeTool === 'POINT' && rectangleSize === null"
              i18n-tmTooltip="@@core.draw.draw-point"
              tmTooltip="Draw point"
              mat-stroked-button
              color="primary"
              (click)="draw(drawingTypes.POINT)">
        <mat-icon svgIcon="tools_draw_point"></mat-icon>
      </button>
      <button [class.button--active]="activeTool === 'LINE'"
              i18n-tmTooltip="@@core.draw.draw-line"
              tmTooltip="Draw line"
              mat-stroked-button
              color="primary"
              (click)="draw(drawingTypes.LINE)">
        <mat-icon svgIcon="tools_draw_line"></mat-icon>
      </button>
      <button [class.button--active]="activeTool === 'POLYGON'"
              i18n-tmTooltip="@@core.draw.draw-polygon"
              tmTooltip="Draw polygon"
              mat-stroked-button
              color="primary"
              (click)="draw(drawingTypes.POLYGON)">
        <mat-icon svgIcon="tools_draw_polygon"></mat-icon>
      </button>
      <button [class.button--active]="activeTool === 'SQUARE'"
              i18n-tmTooltip="@@core.draw.draw-square"
              tmTooltip="Draw square"
              mat-stroked-button
              color="primary"
              (click)="draw(drawingTypes.SQUARE)">
        <mat-icon svgIcon="tools_draw_square"></mat-icon>
      </button>
      <button [class.button--active]="activeTool === 'RECTANGLE' || rectangleSize != null"
              i18n-tmTooltip="@@core.draw.draw-rectangle"
              tmTooltip="Draw rectangle"
              mat-stroked-button
              color="primary"
              (click)="draw(drawingTypes.RECTANGLE)">
        <mat-icon svgIcon="tools_draw_rectangle"></mat-icon>
      </button>
      <button [class.button--active]="activeTool === 'CIRCLE'"
              i18n-tmTooltip="@@core.draw.draw-circle"
              tmTooltip="Draw circle"
              mat-stroked-button
              color="primary"
              (click)="draw(drawingTypes.CIRCLE)">
        <mat-icon svgIcon="tools_draw_circle"></mat-icon>
      </button>
      <button [class.button--active]="activeTool === 'ELLIPSE'"
              i18n-tmTooltip="@@core.draw.draw-ellipse"
              tmTooltip="Draw ellipse"
              mat-stroked-button
              color="primary"
              (click)="draw(drawingTypes.ELLIPSE)">
        <mat-icon svgIcon="tools_draw_ellipse"></mat-icon>
      </button>
      <button [class.button--active]="activeTool === 'STAR'"
              i18n-tmTooltip="@@core.draw.draw-star"
              tmTooltip="Draw star"
              mat-stroked-button
              color="primary"
              (click)="draw(drawingTypes.STAR)">
        <mat-icon svgIcon="tools_draw_star"></mat-icon>
      </button>
      <button [class.button--active]="activeTool === 'LABEL'"
              i18n-tmTooltip="@@core.draw.draw-label"
              tmTooltip="Draw label"
              mat-stroked-button
              color="primary"
              (click)="draw(drawingTypes.LABEL)">
        <mat-icon svgIcon="tools_draw_label"></mat-icon>
      </button>
    </div>
    <div class="horizontal-line"></div>
    <div class="icon-button-list split-buttons">
      <div class="selected_feature_buttons">
        <button [class.button--active]="!activeTool"
                i18n-tmTooltip="@@core.draw.select-modify-move-feature"
                tmTooltip="Select, modify size and/or move feature"
                mat-stroked-button
                color="primary"
                (click)="enableSelectAndModify()">
          <mat-icon svgIcon="tools_cursor"></mat-icon>
        </button>
        @if (selectedFeature) {
          <button mat-stroked-button
                  (click)="removeSelectedFeature()"
                  color="warn"
                  i18n-tmTooltip="@@core.drawing.delete-selected-drawing-object"
                  tmTooltip="Delete selected drawing object">
            <mat-icon svgIcon="remove"></mat-icon>
          </button>
          <button mat-stroked-button
                  (click)="duplicateSelectedFeature()"
                  i18n-tmTooltip="@@core.drawing.duplicate-selected-drawing-object"
                  tmTooltip="Duplicate selected drawing object">
            <mat-icon svgIcon="copy"></mat-icon>
          </button>
        }
      </div>
      @if (hasFeatures$ | async) {
        <div class="drawing_buttons">
          <button mat-stroked-button
                  (click)="removeAllFeatures()"
                  color="warn"
                  i18n-tmTooltip="@@core.drawing.delete-drawing"
                  tmTooltip="Delete complete drawing">
            <mat-icon svgIcon="close"></mat-icon>
          </button>
          <button mat-stroked-button
                  (click)="zoomToEntireDrawing()"
                  i18n-tmTooltip="@@core.drawing.zoom-to-entire-drawing"
                  tmTooltip="Zoom to show entire drawing">
            <mat-icon class="zoom_max" svgIcon="zoom_max"></mat-icon>
          </button>
        </div>
      }
    </div>

    @if(activeTool === 'RECTANGLE' || this.rectangleSize != null) {
      <button [class.button--active]="rectangleSize?.label === '1x1'"
              style="min-width: 40px; padding: 0 8px; border-radius: 3px; margin: 8px 8px 0 0;"
              tmTooltip="Draw rectangle 1m by 1m"
              mat-stroked-button
              color="primary"
              (click)="selectRectangleSize(1, 1)">1x1</button>
      <button [class.button--active]="rectangleSize?.label === '2x2'"
              style="min-width: 40px; padding: 0 8px; border-radius: 3px; margin: 8px 8px 0 0;"
              tmTooltip="Draw rectangle 2m by 2m"
              mat-stroked-button
              color="primary"
              (click)="selectRectangleSize(2, 2)">2x2</button>
      <button [class.button--active]="rectangleSize?.label === '5x5'"
              style="min-width: 40px; padding: 0 8px; border-radius: 3px; margin: 8px 8px 0 0;"
              tmTooltip="Draw rectangle 5m by 5m"
              mat-stroked-button
              color="primary"
              (click)="selectRectangleSize(5, 5)">5x5</button>
    }

    <tm-drawing-objects-list [drawingLayerId]="drawingLayerId"></tm-drawing-objects-list>
    @if (selectedDrawingStyle) {
      <tm-drawing-style-form
        [type]="selectedDrawingStyle"
        [style]="style"
        (styleUpdated)="featureStyleUpdates($event)"></tm-drawing-style-form>
    }
  </div>
}
