@let layoutConfig = layoutService.componentsConfig$ | async;
@if (layoutConfig) {
  @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.HEADER)) { <tm-header></tm-header> }
  <div class="viewer">
    <div class="map">
      @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.FEATURE_INFO)) { <tm-feature-info></tm-feature-info> }
      <tm-map></tm-map>
      <div class="map-controls-left">
        @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.SIMPLE_SEARCH)) { <tm-simple-search></tm-simple-search> }
      </div>
      <div class="map-controls-right">
        @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.GEOLOCATION)) { <tm-geolocation></tm-geolocation> }
      </div>
      <div class="map-controls-left--on-bottom">
        @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.SCALE_BAR)) { <tm-scale-bar></tm-scale-bar> }

      </div>
      <div class="map-controls-right--on-bottom">
        @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.BACKGROUND_LAYER_TOGGLE)) { <tm-background-layer-toggle></tm-background-layer-toggle> }
      </div>
    </div>
    <div class="mobile-menubar-panel">
      <tm-mobile-menubar-panel>
        @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.TOC)) { <tm-toc [mobileToc]="true"></tm-toc> }
        @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.LEGEND)) { <tm-legend></tm-legend> }
        @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.EDIT)) { <tm-edit></tm-edit> }
        @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.MOBILE_MENUBAR_HOME)) {
          <tm-mobile-menubar-home>
            @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.INFO)) { <tm-info></tm-info> }
            @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.TERRAIN_CONTROLS)) { <tm-terrain-controls [noExpansionPanel]="true"></tm-terrain-controls> }
            @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.FILTER)) { <tm-filter></tm-filter> }
            @if (layoutService.isComponentEnabled(layoutConfig, BaseComponentTypeEnum.COORDINATE_LINK_WINDOW)) { <tm-coordinate-link-window></tm-coordinate-link-window> }
          </tm-mobile-menubar-home>
        }
        @if (layoutService.isComponentEnabled(layoutConfig, componentTypes.FEATURE_INFO)) { <tm-feature-info-dialog></tm-feature-info-dialog> }
      </tm-mobile-menubar-panel>
    </div>
    <div class="mobile-menubar-buttons">
      <tm-mobile-menubar-bottom [config]="layoutConfig.config"></tm-mobile-menubar-bottom>
    </div>
  </div>
}
